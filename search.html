<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>搜索结果 - Ginv's Amazon</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
   
 <header>
    <div class="container">
        <div class="logo">
            <img src="assets/images/logo.png" alt="网站Logo">
            <span>Ginv's Amazon</span>
        </div>
        <div class="search-container">
            <form class="search-form" action="/search" method="GET">
                <input type="text" 
                       class="search-input" 
                       placeholder="输入搜索内容..." 
                       aria-label="网站搜索"
                       autocomplete="off">
                <button type="submit" class="search-button" aria-label="执行搜索">
                    <svg class="search-icon" viewBox="0 0 24 24" width="18" height="18">
                        <path fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 1 0-.7.7l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14z"/>
                    </svg>
                </button>
                <div class="search-results"></div>
            </form>
        </div>
        <nav>
            <a href="articles/">文章</a>
            <a href="tools/">工具</a>
            <a href="calculators/">计算器</a>
            <a href="resources/">资源</a>
        </nav>
        <div class="header-actions">
            <button id="theme-toggle" class="theme-toggle">🌙 </button>
        </div>
    </div>
</header>
    <main class="container">
        <h1>搜索结果</h1>
        <div id="search-results-page"></div>
    </main>

    <script src="assets/js/search.js"></script>
    <script>
        // 专门用于搜索结果页的逻辑
        document.addEventListener('DOMContentLoaded', function() {
            const searchResultsContainer = document.getElementById('search-results-page');
            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('q');
            
            if (query) {
                const results = performSearch(query);
                
                if (results.length > 0) {
                    const grouped = results.reduce((acc, item) => {
                        if (!acc[item.type]) acc[item.type] = [];
                        acc[item.type].push(item);
                        return acc;
                    }, {});
                    
                    for (const [type, items] of Object.entries(grouped)) {
                        const section = document.createElement('section');
                        section.innerHTML = `<h2>${type}</h2>`;
                        
                        items.forEach(item => {
                            const resultItem = document.createElement('div');
                            resultItem.className = 'search-result-card';
                            resultItem.innerHTML = `
                                <h3><a href="${item.url}">${highlightMatches(item.title, query)}</a></h3>
                                <p class="search-snippet">${getContentSnippet(item.content, query)}</p>
                            `;
                            section.appendChild(resultItem);
                        });
                        
                        searchResultsContainer.appendChild(section);
                    }
                } else {
                    searchResultsContainer.innerHTML = `
                        <div class="no-results">
                            <p>没有找到"${escapeHtml(query)}"的相关结果</p>
                            <p>尝试使用不同的关键词搜索</p>
                        </div>
                    `;
                }
            }
        });
    </script>
</body>
</html>
